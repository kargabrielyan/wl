/**
 * Утилита для получения дефолтных изображений категорий из public/images
 * Используется, если в базе данных нет изображения для категории
 */

export const getCategoryDefaultImage = (categoryName: string): string | null => {
  // Полный маппинг всех категорий на изображения из public/images
  // Используем JPG файлы с армянскими названиями
  const imageMap: Record<string, string> = {
    // Новые категории (точные названия из списка) - используем JPG файлы
    'Օրորոցներ': '/images/Օրորոցներ.JPG',
    'Պահարաններ': '/images/Պահարաններ.JPG',
    'Օրթոպեդ ներքնակներ': '/images/Օրթոպեդ ներքնակներ.JPG',
    'Անկողնային պարագաներ': '/images/Անկողնային պարագաներ.JPG',
    'Հավաքածուներ': '/images/Հավաքածուներ.JPG',
    'Երաժշտական խաղալիքներ': '/images/Երաժշտական խաղալիքներ.JPG',
    'Մանկասայլակի հավաքածուներ': '/images/Մանկասայլակի հավաքածուներ.JPG',
    'Սենյակի դեկորներ': '/images/Սենյակի դեկորներ.JPG',
    'Գործած զամբյուղներ': '/images/Գործած զամբյուղներ.JPG',
    'Լոգանքի պարագաներ': '/images/Լոգանքի պարագաներ.JPG',
    'Գործած ադիալներ': '/images/Գործած ադիալներ.JPG',
    'Կերակրման բարձեր': '/images/Կերակրման բարձեր.JPG',
    'Քողեր': '/images/Քողեր.JPG',
    'Հյուսեր': '/images/Հյուսեր.JPG',
    'Դուրս գրման հավաքածուներ': '/images/Դուրս գրման հավաքածուներ.JPG',
    
    // Альтернативные варианты написания (на случай если в БД будут другие варианты)
    'Անկողնային Պարագաներ': '/images/Անկողնային պարագաներ.JPG',
    'Երաժշտական Խաղալիքներ': '/images/Երաժշտական խաղալիքներ.JPG',
    'Մանկական Սենյակի Դեկորներ': '/images/Սենյակի դեկորներ.JPG',
    'Մանկասայլակի Հավաքածու': '/images/Մանկասայլակի հավաքածուներ.JPG',
    'Դուրս Գրման Հավաքածու': '/images/Դուրս գրման հավաքածուներ.JPG',
    'Կերակրման Բարձեր': '/images/Կերակրման բարձեր.JPG',
    'Գործած Ադիալներ': '/images/Գործած ադիալներ.JPG',
    'Գործած Զամբյուղներ': '/images/Գործած զամբյուղներ.JPG',
    'Օրթոպեդ Ներքնակներ': '/images/Օրթոպեդ ներքնակներ.JPG',
    'Լոգանքի Պարագաներ': '/images/Լոգանքի պարագաներ.JPG',
    'Սենյակի Դեկորներ': '/images/Սենյակի դեկորներ.JPG',
  }
  
  // Возвращаем изображение по точному совпадению
  if (imageMap[categoryName]) {
    return imageMap[categoryName]
  }
  
  // Если точного совпадения нет, возвращаем null
  // Компоненты будут использовать fallback (эмодзи или placeholder)
  return null
}

/**
 * Получить изображение категории с приоритетом:
 * 1. Изображение из БД (category.image)
 * 2. Дефолтное изображение из public/images
 * 3. null (будет показан placeholder)
 */
export const getCategoryImage = (category: { name: string; image?: string | null }): string | null => {
  // Сначала проверяем изображение из БД
  if (category.image) {
    // Санитизируем URL из БД
    let url = String(category.image).trim()
    if (url && !/^(blob:|data:)/i.test(url)) {
      url = url.replace(/\\/g, '/')
      url = url.replace(/^https?:\/\/[^/]+/, '')
      if (!url.startsWith('/')) url = `/${url}`
      return url
    }
  }
  
  // Если в БД нет изображения, используем дефолтное
  return getCategoryDefaultImage(category.name)
}

