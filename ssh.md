# SSH Key - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∫ —Å–µ—Ä–≤–µ—Ä—É Hetzner

## ‚ö†Ô∏è –í–ê–ñ–ù–û! –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ù–ò–ö–û–ì–î–ê –Ω–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –≤ Git!**
- **–ü—É–±–ª–∏—á–Ω—ã–µ –∫–ª—é—á–∏ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å**
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ (.pem, –±–µ–∑ .pub) - —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ!**

## üìã –û–±–∑–æ—Ä

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É Hetzner –∏—Å–ø–æ–ª—å–∑—É—è –≤–∞—à SSH –∫–ª—é—á –∏–∑ –ø–∞–ø–∫–∏ `~/.ssh/`.

## üîë –í–∞—à–∏ SSH –∫–ª—é—á–∏

### –ì–¥–µ –Ω–∞–π—Ç–∏ –∫–ª—é—á–∏:

**1. –ö–ª—é—á –∏–∑ –ø–∞–ø–∫–∏ ~/.ssh/ (Ed25519):**
```bash
cat ~/.ssh/id_ed25519.pub
```

**2. –ö–ª—é—á –∏–∑ –ø–∞–ø–∫–∏ Desktop (RSA):**
```bash
cat ~/Desktop/SSH\ Mac/hetzner_key.pub
```

### –¢–∏–ø—ã –∫–ª—é—á–µ–π:
- **Ed25519** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∫–æ—Ä–æ—Ç–∫–∏–π, –±—ã—Å—Ç—Ä—ã–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **RSA** - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π, –¥–ª–∏–Ω–Ω—ã–π, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π

## üñ•Ô∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

- **IP –∞–¥—Ä–µ—Å:** 167.235.50.10
- **IPv6:** 2a01:4f8:1c1b:d56d::/64
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** root
- **–ü–æ—Ä—Ç:** 22
- **–û–°:** Ubuntu 24.04.3 LTS

## ‚öôÔ∏è SSH –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `~/.ssh/config` –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```ssh
Host *
    AddKeysToAgent yes
    UseKeychain yes
    IdentityFile ~/.ssh/id_ed25519

Host hetzner
    HostName 167.235.50.10
    User root
    Port 22
    IdentityFile ~/.ssh/id_ed25519
    IdentitiesOnly yes
    PasswordAuthentication no
    PubkeyAuthentication yes
    StrictHostKeyChecking no
```

## üöÄ –°–ø–æ—Å–æ–±—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 1. –ü—Ä–æ—Å—Ç–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
ssh hetzner
```

### 2. –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–ª—é—á–∞
```bash
ssh -i ~/.ssh/id_ed25519 root@167.235.50.10
```

### 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –∫–ª—é—á–æ–º –∏–∑ –ø–∞–ø–∫–∏ Desktop
```bash
ssh -i "~/Desktop/SSH Mac/hetzner_key" root@167.235.50.10
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH Agent

### –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ SSH agent
```bash
ssh-add ~/.ssh/id_ed25519
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–ª—é—á–∏
```bash
ssh-add -l
```

### –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ agent
```bash
ssh-add -D
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
~/.ssh/
‚îú‚îÄ‚îÄ id_ed25519          # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (Ed25519)
‚îú‚îÄ‚îÄ id_ed25519.pub      # –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (Ed25519)
‚îú‚îÄ‚îÄ config              # SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ known_hosts         # –ò–∑–≤–µ—Å—Ç–Ω—ã–µ —Ö–æ—Å—Ç—ã

~/Desktop/SSH Mac/
‚îú‚îÄ‚îÄ hetzner_key         # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á (RSA)
‚îú‚îÄ‚îÄ hetzner_key.pub     # –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (RSA)
‚îú‚îÄ‚îÄ config              # SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ known_hosts         # –ò–∑–≤–µ—Å—Ç–Ω—ã–µ —Ö–æ—Å—Ç—ã
```

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Permission denied"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   ssh hetzner "cat ~/.ssh/authorized_keys"
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–ª—é—á—É:
   ```bash
   ls -la ~/.ssh/id_ed25519
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rw-------
   ```

3. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
   ```bash
   chmod 600 ~/.ssh/id_ed25519
   ```

### –û—à–∏–±–∫–∞ "Host key verification failed"
```bash
ssh-keygen -R 167.235.50.10
```

### –û—à–∏–±–∫–∞ "Could not resolve hostname"
```bash
ping 167.235.50.10
```

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä

### –ß–µ—Ä–µ–∑ SSH (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø —Å –ø–∞—Ä–æ–ª–µ–º)
```bash
ssh-copy-id -i ~/.ssh/id_ed25519.pub root@IP_–ê–î–†–ï–°_–°–ï–†–í–ï–†–ê
```

### –í—Ä—É—á–Ω—É—é
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á:
   ```bash
   cat ~/.ssh/id_ed25519.pub
   ```

2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á:
   ```bash
   ssh root@IP_–ê–î–†–ï–°_–°–ï–†–í–ï–†–ê
   mkdir -p ~/.ssh
   echo "–°–û–ü–ò–†–£–ô–¢–ï_–°–Æ–î–ê_–í–ê–®_–ü–£–ë–õ–ò–ß–ù–´–ô_–ö–õ–Æ–ß" >> ~/.ssh/authorized_keys
   chmod 700 ~/.ssh
   chmod 600 ~/.ssh/authorized_keys
   ```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ed25519 –∫–ª—é—á–∏ (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ)
- ‚úÖ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∫–ª—é—á–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å–Ω—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è –∫–ª—é—á–µ–π
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –ø–æ IP –∞–¥—Ä–µ—Å–∞–º –≤ SSH config

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å IP –∞–¥—Ä–µ—Å–∞
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---
*–°–æ–∑–¥–∞–Ω–æ: $(date)*
*–í–µ—Ä—Å–∏—è: 1.0*
